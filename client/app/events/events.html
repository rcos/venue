<navbar></navbar>

<div class='event-page'>
  <div class='container' ng-show='err'>
    <div class='col-xs-12'>
      <div ng-show='err.status == 404'>
        <div class='error-deadend'> we couldn't find that event </div>
        <div class='error-deadend-msg'>
          We weren't able to find that event, try to navigate to the event from your <a href="/{{user.isInstructor ? 'instructor' : 'student'}}/events"> dashboard </a>.
        </div>
      </div>
      <div ng-show='err.status != 404'>
        <div class='error-deadend'> {{err.statusText}} </div>
        <div class='error-deadend-msg'>
          We're not sure what happened, send the following debug info to a system administrator.
        </div>
        <div class='error-deadend-fullmsg'>
          {{err}}
        </div>
      </div>
    </div>
  </div>
  <div class='container' ng-show='!err'>
    <div class='row'>
      <div class='col-xs-12'>
        <div class='title'>
          {{event.info.title}}
        </div>
      </div>
      <div class='col-xs-7'>
        <div class='description'>
          {{event.info.description}}
        </div>
        <div class='section'>
          For {{event.section.course.name}} {{(event.section.sectionNumbers.length===1)?"section":"sections"}} <span ng-repeat="number in event.section.sectionNumbers">{{number}}<span ng-hide="$last">, </span></span>
        </div>
        <div class='submissionInstructions'>
          Instructor Note: {{event.submissionInstructions}}
        </div>
        <div class='info'>
          Event Information
        </div>
        <div class='description'>
          <div class="subsection">{{(event.info.times.length===1)?"Time":"Times"}}:</div>
          <div ng-repeat="time in event.info.times">{{time.start | date : "short"}} - {{time.end | date : "short"}}</div>
        </div>
        <div class='description'>
          <div class="subsection">Location:</div>
          <div>{{event.info.location.description}}</div>
          <div>{{event.info.location.address}}</div>
        </div>
        <div class="submissionInstructions">
          {{(event.info.author._id === event.author._id)?"Author":"Authors"}}: {{event.author.firstName}} {{event.author.lastName}}<span ng-hide="event.info.author._id === event.author._id"> and {{event.info.author.firstName}} {{event.info.author.lastName}}</span>
        </div>

        <br>
      </div>
      <div class='col-xs-5'>
        <img class="img-responsive" http-src='{{event.info.imageURLs[0]}}'/>
      </div>
      <div class='col-xs-12'>
        <div class='upload-button-container' ng-show='!user.isInstructor'>
          <button class='upload-button btn btn-md' ng-click='goToEventUpload(event._id)'>Upload to Event</button>
        </div>
        <div ng-show='user.isInstructor'>
          <button class='btn btn-md btn-warning' ng-click='deleteEvent(event)'>Delete Event</button>
          <button class='btn btn-md btn-primary' ng-click='goToSection(event)'>View {{event.section.course.department}} {{event.section.course.courseNumber}} Sections {{event.section.sectionNumbers.join(",")}}</button>
        </div>
      </div>
    </div>
  </div>
  <div class='container'>
    <div ng-show='user.isInstructor'>
      <submissionview event-id="eventId"></submissionview>
    </div>
  </div>
</div>

<footer></footer>
